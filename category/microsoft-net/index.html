<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
    <title>Log4D - Microsoft .Net</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Open Graph tags -->

            <meta property="og:type" content="website"/>
            <meta property="og:title" content="Log4D"/>
            <meta property="og:url" content=""/>
            <meta property="og:description" content="Log4D"/>

    <!-- Bootstrap -->
        <link rel="stylesheet" href="/theme/css/bootstrap.min.css" type="text/css"/>
    <link href="/theme/css/font-awesome.min.css" rel="stylesheet">
    <link href="/theme/css/pygments.css" rel="stylesheet">
    <link rel="stylesheet" href="/theme/css/style.css" type="text/css"/>
    <!-- JavaScript plugins (requires jQuery) -->
    <script src="http://code.jquery.com/jquery.js"></script>


    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-8822123-3']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();

    </script>
</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="/" class="navbar-brand">Log4D</a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                    <li><a href="/tags/">Tags</a></li>
                    <li><a href="/links/">Links</a></li>
                    <li><a href="/about/">About</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="/archives/"><i class="icon-th-list"></i>Archives</a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</nav>
<!-- /.navbar -->
<div class="container">
    <div class="row">
        <div class="col-lg-9">
            <article>
                <h2><a href="/2011/02/dataconnectiondialog/">使用DataConnectionDialog来获取连接字符串</a></h2>
                <div class="summary"><p>在系统开发中，数据库连接字符串经常被保存到.config/.ini等配置文件中，以提高系统的灵活性。上大学时候，为了实现灵活配置数据库的效果，用拼字符串的方
法来动态生成连接字符串，这种方法充满了Bad Smell。</p>
<p>昨天用CodeSmith时候，看到它的数据连接配置界面，如此的眼熟，如下图。</p>
<p><img alt="" src="http://upload-log4d.qiniudn.com/2011/02/DataConnectionDialog.jpg" /></p>
<p>Google了一下，原来这家伙的名字叫做DataConnectionDialog，所属命名空间为Microsoft.VisualStudio.Data。</p>
<p>使用的方法也很简单，引用Microsoft.Data.ConnectionUI.dll和Microsoft.Data.ConnectionUI.Dialog
.dll，这两个文件位于Microsoft Visual Studio 9.0Common7IDE下面。</p>
<p>这两个dll并没有其他依赖关系，可以放心的放到自己的程序中使用。</p>
<p>使用代码如下</p>
<div class="highlight"><pre><span class="n">DataConnectionDialog</span> <span class="n">dataConnectionDialog</span> <span class="o">=</span> <span class="n">new</span> <span class="n">DataConnectionDialog</span><span class="p">();</span>
<span class="n">DataSource</span><span class="p">.</span><span class="n">AddStandardDataSources</span><span class="p">(</span><span class="n">dataConnectionDialog</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">DataConnectionDialog</span><span class="p">.</span><span class="n">Show</span><span class="p">(</span><span class="n">dataConnectionDialog</span><span class="p">)</span> <span class="o">==</span> <span class="n">DialogResult</span><span class="p">.</span><span class="n">OK ...</span></pre></div>
                    <a class="btn btn-default btn-xs" href="/2011/02/dataconnectiondialog/">more ...</a>
                </div>
            </article>
            <hr/>
            <article>
                <h2><a href="/2011/01/gac/">在.net中使用GAC</a></h2>
                <div class="summary"><h2>GAC</h2>
<p>GAC是什么？是用来干嘛的？GAC的全称叫做全局程序集缓存，通俗的理解就是存放各种.net平台下面需要使用的dll的地方。GAC的具体目录在windows/
assembly。</p>
<p>喜欢使用破解软件的朋友可能会经常使用替换DLL这招，这个DLL虽然和.net下面的DLL有所不同，但大致起的作用还是一样的：使用共同的动态链接库来提高库复用
，减少文件体积。在.net平台之前，程序们都把可能用到的公共DLL存放到system32文件夹下。由于版本的不一致及其他原因（将控制信息存放到注册表），造成
了很有名的<a href="http://zh.wikipedia.org/zh-cn/DLL%E5%9C%B0%E7%8D%84">DLL Hell</a>。</p>
<p>最近在读俞甲子的《<a href="http://book.douban.com/subject/3652388/">程序员的自我修养</a>》，中间花了很大的篇幅描述程序编译中
的链接这个过程。而比较巧合的是，我的《<a href="http://book.douban.com/subject/3563971/">C#与.NET 3.5高级程序设计</a>》也正好读到程序集这一块。微软使用了GAC来避免DLL重蹈覆辙。现在，我就来部署一个简单的通用类库到GAC中。</p>
<h2>获取强名称（签名）</h2>
<p>并不是随便一个DLL都可以放到GAC中，如果这样的话，和之前的DLL Hell也没什么区别了。GAC使用一个强名称（签名）的方式来区分不同的DLL。每个签名
都是独一无二的公钥私钥对。现在我们使用SDK的sn工具为我的DUtil库生成一个snk签名 ...</p>
                    <a class="btn btn-default btn-xs" href="/2011/01/gac/">more ...</a>
                </div>
            </article>
            <hr/>
            <article>
                <h2><a href="/2009/11/membership-the-use-of-experience/">MemberShip使用心得</a></h2>
                <div class="summary"><p>花了很大一段时间在学习MemberShip，总是要留下一些纪念文章的。
我之前的日志提到过一个简单的用户权限设计：User+Role+UserInRole(<a href="http://log4d.com/2009/06/design-of-user-
rights">http://log4d.com/2009/06/design-of-
user-rights</a>)，但是这样还是不够灵活，最好需要能够对每一个功能模块进行权限控制，而且需要符合开闭原则。 MemberShip呢，是微软推出的一套很强大的用
户权限管理系统。就我使用的两大部分，主要包括MemberShip和roleManager这两个模块，分别是对用户和角色进行管理。</p>
<h2>MemberShip对系统进行管理大致分为两个办法</h2>
<p>1.可以通过"登录"系列用户控件的任务窗口中的"管理网站"打开"ASP.Net Web 应用程序管理"。 可以控制用户、角色、权限三个主要属性，另外还能选择
"提供程序"（这个provider分为MemberShip和RoleManager两种，如果同名的话，可以选择同一提供程序 ...</p>
                    <a class="btn btn-default btn-xs" href="/2009/11/membership-the-use-of-experience/">more ...</a>
                </div>
            </article>
            <hr/>
            <article>
                <h2><a href="/2009/11/thishouse-housing-sales-system/">ThisHouse房屋销售系统</a></h2>
                <div class="summary"><p>呃，这是我在一个星期内搞鼓的一个Asp.NET课程设计，没有什么太多的内容，把它发布到了Csdn了，开了5分，嗯，对得起我一个星期拼命码代码。（哦，我很无耻
的使用了<a href="http://www.neoease.com/">MG12</a>的iNove主题……）</p>
<p><img alt="thisHouse" src="http://upload-log4d.qiniudn.com/2009/11/thisHouse.jpg" /></p>
<h2>readme.txt内容：</h2>
<p>This House房屋销售系统 本人大四一个课程设计，大概花费1周时间，构架2天，编码3天，零碎程序1天，论文1天。</p>
<p>程序写的不好不坏，是DAL+BLL+Model+Web三层架构，使用的动软生成器生成的简单三层框架。压缩包包括源码，数据库，一个star
uml简单设计图，数据库文档，需求分析和论文。</p>
<p>系统关键词是： <strong>Asp.NET</strong>;&amp;nbsp_place_holder; <strong>MemberShip</strong>;&amp;nbsp_place_holder;
<strong>iBatisNet</strong>;&amp;nbsp_place_holder; <strong>AjaxControlToolkit</strong>; <strong>房屋销售系统 </strong>
数据库使用的是一个完整的MemberShip 权限管理系统，而不是我自己写的简单User in Role ...</p>
                    <a class="btn btn-default btn-xs" href="/2009/11/thishouse-housing-sales-system/">more ...</a>
                </div>
            </article>
            <hr/>
            <article>
                <h2><a href="/2009/10/ajaxcontroltoolkit-controls-introduced-reproduced/">AjaxControlToolKit控件介绍[转载]</a></h2>
                <div class="summary"><p>来源：<a href="http://www.cnblogs.com/haha8/archive/
2009/09/26/1574412.html">ajax toolkit 控件介绍 - 欢迎来到哈哈的天堂 - 博客园</a>（只是来源，感觉不是这个博客原创，作者应该未知）</p>
<p>文字太多了，所以我没有把代码提取到代码段，只是把标题提出来了，大家不要介意啊…^_^</p>
<h3>1.Accordion</h3>
<p>功能：实现了QQ、Msn好友分类的折叠效果，就像包含了多个CollapsiblePanels</p>
<p>细节： (1)不要把Accordion放在Table种同时又把 FadeTransitions 设置为True，这将引起布局混乱</p>
<p>(2)每一个 AccordionPane control 有一个Header 和Content的 template</p>
<p>(3)在Content中可以进行任意扩展，你什么都可以放上^_ ...</p>
                    <a class="btn btn-default btn-xs" href="/2009/10/ajaxcontroltoolkit-controls-introduced-reproduced/">more ...</a>
                </div>
            </article>
            <hr/>
            <article>
                <h2><a href="/2009/10/membership-moving-soft-issue-of-builder-under-the-userid/">MemberShip在动软生成器下UserId的问题</a></h2>
                <div class="summary"><h2>背景</h2>
<p>这个月的课程设计我抽签是「房屋销售系统」，一个比较简单的类CMS系统。考虑到时间的因素，我放弃了Python in Django，而是选择了我相对熟悉的.N
ET平台。我使用的主要工具是<a href="http://www.maticsoft.com/">动软.NET代码生成器</a>(一个很强大的.NET代码生成器)+Member
Ship(微软推出的一个Asp.NET的权限系统)。</p>
<p>我之前只是对MemberShip略有耳闻，动软也是用过几次，所以在一个星期内完成这个课程设计还是比较冒险的。呃```呵呵，这也比较符合我的风格，总是要学点东
西的嘛。</p>
<h2>问题</h2>
<p>MemberShip本身是一个很强大的权限管理系统，其中UserId使用的是uniqueidentifier这种值类型，对应到微软提出的一种标示类型GUID
(System.GUID)。这是一种类似「9498ea1f-ce4e-4e6d-b636-1bbbe3db9bde」的非字符串。</p>
<p>动软.NET代码生成器会根据建好的数据库生成相应的代码，可以选择三层模式（BLL+DAL+Model+Web），他会自动生成每层代码。一般来说，生成的项目可
以编译完成，但是如果在其中存在uniqueidentifier这种类型的表，就会产生错误 ...</p>
                    <a class="btn btn-default btn-xs" href="/2009/10/membership-moving-soft-issue-of-builder-under-the-userid/">more ...</a>
                </div>
            </article>
            <hr/>
            <article>
                <h2><a href="/2009/08/no-photo-caused-by-the/">由No photo引起</a></h2>
                <div class="summary"><p><a href="http://www.chinaqiu
gou.com/images/detail_no_pic.gif"><img alt="" src="http://www.chinaqiugou.com/images/detail_no_pic.gif" /></a></p>
<p>某个系统，检查用户照片，如果发现用户并没有设定照片就返回一张No Photo的图片。</p>
<p>返回数据库的图片代码比较格式化。</p>
<div class="highlight"><pre><span class="kt">int</span> <span class="n">Id</span> <span class="o">=</span> <span class="n">Int32</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">Request</span><span class="p">.</span><span class="n">Params</span><span class="p">.</span><span class="n">Get</span><span class="p">(</span><span class="s">&quot;Id&quot;</span><span class="p">));</span>
<span class="n">string</span> <span class="n">type</span> <span class="o">=</span> <span class="n">Request</span><span class="p">.</span><span class="n">Params</span><span class="p">.</span><span class="n">Get</span><span class="p">(</span><span class="s">&quot;type&quot;</span><span class="p">);</span>
<span class="n">BLL</span><span class="p">.</span><span class="n">Student</span> <span class="n">bll</span> <span class="o">=</span> <span class="n">new</span> <span class="n">JznuManager</span><span class="p">.</span><span class="n">BLL</span><span class="p">.</span><span class="n">Student</span><span class="p">();</span>
<span class="n">student</span> <span class="o">=</span> <span class="n">new</span> <span class="n">JznuManager</span><span class="p">.</span><span class="n">Model</span><span class="p">.</span><span class="n">Student</span><span class="p">();</span>
<span class="n">student</span> <span class="o">=</span> <span class="n">bll</span><span class="p">.</span><span class="n">GetModel</span><span class="p">(</span><span class="n">Id</span><span class="p">);</span>
<span class="n">Response</span><span class="p">.</span><span class="n">ContentType</span> <span class="o">=</span> <span class="s">&quot;image/jpeg&quot;</span><span class="p">;</span>
<span class="n">Response ...</span></pre></div>
                    <a class="btn btn-default btn-xs" href="/2009/08/no-photo-caused-by-the/">more ...</a>
                </div>
            </article>
            <hr/>
            <article>
                <h2><a href="/2008/07/course-design-works-great-debut/">课程设计作品大登场</a></h2>
                <div class="summary"><p>本文乃08-09校内日志存档，我一起给发布了，如果给大家阅读造成困难，我深感抱歉</p>
<p>这个系统我还是很得意的，是我大二时候学C#时候巅峰之作，那时候刚学完网络，
还没开任何网络编程，那时候第一次接触SourceForge，参考了好多英文资料。</p>
<hr />
<h1>AzaChat管理系统</h1>
<p>Powered by DDD &amp; King ZD</p>
<h2>系统功能</h2>
<ul>
<li>登录，注册，群聊，私聊，踢人，聊天字体设置，字体颜色，图片插入，图文混编，音效播放，抖动窗体(模仿QQ)</li>
<li>聊天人员管理，数据库管理，数据库查找功能</li>
<li>皮肤更换功能</li>
</ul>
<h2>系统说明</h2>
<p>这个系统是我这个学期课程设计，花了我将近一个多月的时间(期末考试阶段，很忙 - -#)，在写之前，我完全不懂数据库和网络传输，C#和面向对象思想也是这学期刚开的。虽然Bug还很多，但我仍然写出来了，很是开心。</p>
<p>上传到CSDN，希望对大家有帮助。 
Aza的来源是因为一个笑话，一个女人是500只鸭子 ...</p>
                    <a class="btn btn-default btn-xs" href="/2008/07/course-design-works-great-debut/">more ...</a>
                </div>
            </article>
            <hr/>

        </div>
        <div class="col-lg-3 well well-sm" id="sidebar">
<aside>
    <section>
        <ul class="list-group list-group-flush">
                <li class="list-group-item"><h4><i class="icon-home icon-large"></i>Social</h4></li>
                    <li class="list-group-item"><a href="http://twitter.com/alswl"><i
                            class="icon-twitter-sign icon-large"></i>twitter
                    </a></li>
                    <li class="list-group-item"><a href="https://github.com/alswl"><i
                            class="icon-github-sign icon-large"></i>github
                    </a></li>
                    <li class="list-group-item"><a href="http://weibo.com/alswlx"><i
                            class="icon-weibo-sign icon-large"></i>weibo
                    </a></li>


                <li class="list-group-item"><h4><i class="icon-home icon-large"></i>Categories</h4></li>
                    <li class="list-group-item">
                        <a href="/category/c/">
                            <i class="icon-folder-open icon-large"></i>C
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/cheng-xu-ren-sheng/">
                            <i class="icon-folder-open icon-large"></i>程序人生
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/delphibian-cheng/">
                            <i class="icon-folder-open icon-large"></i>Delphi编程
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/dotnet/">
                            <i class="icon-folder-open icon-large"></i>dotNet
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/flashbian-cheng/">
                            <i class="icon-folder-open icon-large"></i>Flash编程
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/gan-wu/">
                            <i class="icon-folder-open icon-large"></i>感悟
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/gong-yu-shan-qi-shi-bi-xian-li-qi-qi/">
                            <i class="icon-folder-open icon-large"></i>工欲善其事必先利其器
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/guan-zhu-hu-lian-wang/">
                            <i class="icon-folder-open icon-large"></i>关注互联网
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/java/">
                            <i class="icon-folder-open icon-large"></i>Java
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/ji-zhu-da-ren/">
                            <i class="icon-folder-open icon-large"></i>技术达人
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/jian-zhan/">
                            <i class="icon-folder-open icon-large"></i>建站
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/jian-zhan-xin-de/">
                            <i class="icon-folder-open icon-large"></i>建站心得
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/linuxer/">
                            <i class="icon-folder-open icon-large"></i>Linuxer
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/mei-shi-peng-ren/">
                            <i class="icon-folder-open icon-large"></i>美食|烹饪
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/microsoft-net/">
                            <i class="icon-folder-open icon-large"></i>Microsoft .Net
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/net-zong-he-ji-zhu/">
                            <i class="icon-folder-open icon-large"></i>.Net, 综合技术
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/phpbian-cheng/">
                            <i class="icon-folder-open icon-large"></i>PHP编程
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/pythonbian-cheng/">
                            <i class="icon-folder-open icon-large"></i>Python编程
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/qian-duan/">
                            <i class="icon-folder-open icon-large"></i>前端
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/qing-chun-de-cai-hong/">
                            <i class="icon-folder-open icon-large"></i>青春的彩虹
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/ri-ji/">
                            <i class="icon-folder-open icon-large"></i>日记
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/ruan-jian-kai-fa-he-xiang-mu-guan-li/">
                            <i class="icon-folder-open icon-large"></i>软件开发和项目管理
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/ruby-bian-cheng/">
                            <i class="icon-folder-open icon-large"></i>Ruby 编程
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/shi-jue-she-ji/">
                            <i class="icon-folder-open icon-large"></i>视觉设计
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/sui-sui-nian/">
                            <i class="icon-folder-open icon-large"></i>碎碎念
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/webqian-duan/">
                            <i class="icon-folder-open icon-large"></i>Web前端
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/wu-hua-ba-men/">
                            <i class="icon-folder-open icon-large"></i>五花八门
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/xing-neng/">
                            <i class="icon-folder-open icon-large"></i>性能
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/xue-hai-wu-ya/">
                            <i class="icon-folder-open icon-large"></i>学海无涯
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/yi-dong-shou-chi/">
                            <i class="icon-folder-open icon-large"></i>移动手持
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/yu-le/">
                            <i class="icon-folder-open icon-large"></i>娱乐
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/zong-he-ji-zhu/">
                            <i class="icon-folder-open icon-large"></i>综合技术
                        </a>
                    </li>

        </ul>
    </section>
</aside>        </div>
    </div>
</div>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="/theme/js/respond.min.js"></script>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'log4d'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
</body>
</html>